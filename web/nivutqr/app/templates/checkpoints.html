{% extends "base.html" %}
<html>
  <head>
    {% if title %}
    <title>{{ title }} - NivutQR</title>
    {% else %}
    <title>Welcome to NivutQR</title>
    {% endif %}
{% block css %}
    <link href="/static/css/bootstrap.css" rel="stylesheet" media="screen">
    <link href="/static/css/footable.standalone.css" rel="stylesheet"/>
{% endblock %}
{% block js %}
    <script src="/static/js/jquery-3.1.1.js"></script>
    <script src="/static/js/bootstrap.js"></script>
    <script src="https://momentjs.com/downloads/moment.min.js"></script>
    <script src="/static/js/footable.js"></script>
    <script type="text/javascript">
        jQuery(function($){
            $('.table').footable();
        });
    </script>
{% endblock %}
  </head>
  <body>
{% block main %}
    <div class="container">
    <table class='table' data-sorting="true">
    <thead>
      <tr>
        <th style="width: 5%; vertical-align: middle;" rowspan="2" class='az' data-defaultsign="nospan" data-defaultsort="asc">ID</th>
        <th style="width: 10%; vertical-align: middle;" rowspan="2" class='az' data-defaultsign="nospan" data-defaultsort="asc">Checkpoint Number</th>
        <th style="width: 5%; vertical-align: middle; align:center;" rowspan="2" class='az' data-defaultsign="nospan" data-defaultsort="asc">Start</th>
        <th style="width: 5%; vertical-align: middle; align:center;" rowspan="2" class='az' data-defaultsign="nospan" data-defaultsort="asc">Finish</th>
        <th style="width: 30%; vertical-align: middle;" rowspan="2" class='az' data-defaultsign="nospan" data-defaultsort="asc">Question</th>
        <th style="width: 20%; vertical-align: middle;" rowspan="2" class='az' data-defaultsign="nospan" data-defaultsort="asc">Options</th>
        <th style="width: 10%; vertical-align: middle;" rowspan="2" class='az' data-defaultsign="nospan" data-defaultsort="asc">Answer</th>
          <th style="width: 5%; vertical-align: middle;" rowspan="2" class='az' data-defaultsign="nospan" data-defaultsort="asc">QR</th>
          <th style="width: 5%; vertical-align: middle;" rowspan="2" class='az' data-defaultsign="nospan" data-defaultsort="asc">Edit</th>
      </tr>
      </thead>
      {% for checkpoint in checkpoints %}
      <tr>
        <td>{{ checkpoint.checkpoint_id }}</td>
        <td>{{ checkpoint.number }}</td>
        <td align="center">{%- if checkpoint.is_start -%}<span class="glyphicon glyphicon-ok-circle" />{% else %}<span />{% endif %}</td>
          <td align="center">{%- if checkpoint.is_finish -%}<span class="glyphicon glyphicon-ok-circle" />{% else %}<span />{% endif %}</td>
        <td>{{ checkpoint.question }}</td>
        {% if checkpoint.options %}
          <td>{%- for option in checkpoint.options.split(';') -%}<li>{{ option }}</li>{% endfor %}</td>
              {% else %}
          <td></td>
          {% endif %}
        <td>{{ checkpoint.answer }}</td>
          <td align="center"><a href="/game/{{ game_id }}/checkpoint/{{ checkpoint.checkpoint_id }}/qr" /><img src="{{ 'https://api.qrserver.com/v1/create-qr-code/?size=300x300&data={game: ' ~ game_id ~ ',checkpoint: ' ~ checkpoint.checkpoint_id ~ '}' }}" alt="qr" style="width:50px;height:50px;"></a></td>
          <td align="center"><a href="/game/{{ game_id }}/checkpoint/{{ checkpoint.checkpoint_id }}" class="btn btn-primary">Edit</a></td>
      </tr>
      {% endfor %}
    </table>

    <a href="/game/{{ game_id }}/checkpoint/new" class="btn btn-success">Add New Checkpoint</a>
  {% endblock %}
  </body>
</html>